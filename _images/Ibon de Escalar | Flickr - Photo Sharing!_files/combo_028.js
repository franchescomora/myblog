YUI.add("flickr-photos-deleteNote-deletor",function(e){"use strict";function t(e,t){var n={};return n.note_id=e,t.callAPI("flickr.photos.notes.delete",n).then(null,function(e){throw t[e.fatal?"error":"debug"]("[flickr-photos-deleteNote-deletor] failed getting or processing API response:",e),e})}e.namespace("ModelDeletors")["flickr-photos-deleteNote"]={run:t}},"@VERSION@",{requires:["flickr-promise"],optional:[]});
YUI.add("note-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{create:function(t){return e.ModelCreators["flickr-photos-addNotes"].run(t,this.appContext)},update:function(t,n){var r;return r={noteId:t,noteX:this.getValue(t,"left"),noteY:this.getValue(t,"top"),noteW:this.getValue(t,"width"),noteH:this.getValue(t,"height"),noteText:this.getValue(t,"text")},e.ModelUpdaters["flickr-photos-editNote"].run(r,this.appContext)},"delete":function(t){return e.ModelDeletors["flickr-photos-deleteNote"].run(t,this.appContext)}},attributes:{authorName:{setter:function(e){return e}},author:{setter:function(e){return e}},left:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},top:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},width:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},height:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},text:{setter:function(e){return e}}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-photos-addNotes-creator","flickr-photos-editNote-updater","flickr-photos-deleteNote-deletor","attribute-helpers"]});
YUI.add("autotag-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{"delete":function(t){return e.ModelDeletors["flickr-photos-removeAutotag"].run(t,this.appContext)}},attributes:{autotagValue:{}}})},"@VERSION@",{requires:["flickr-model-registry"]});
YUI.add("flickr-photos-removeAutotag-deletor",function(e){"use strict";function t(e,t){var n={};return n.tag_id=e,t.callAPI("flickr.photos.removeAutotag",n).then(null,function(e){throw t[e.fatal?"error":"debug"]("[flickr-photos-removeAutotag-deletor] failed getting or processing API response:",e),e})}e.namespace("ModelDeletors")["flickr-photos-removeAutotag"]={run:t}},"@VERSION@",{requires:["flickr-promise"],optional:[]});
YUI.add("photo-autotags-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ModelFetchers["flickr-photos-getInfo"].run(t,this.appContext)},"delete":function(t){return e.ModelDeletors["flickr-photos-removeAutotag"].run(t,this.appContext)}},attributes:{autotags:{isListProxy:!0}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-photos-getInfo-fetcher","flickr-photos-removeAutotag-deletor"]});
YUI.add("flickr-photos-setPerms-updater",function(e){"use strict";function t(e,t){return t.callAPI("flickr.photos.setPerms",e).then(function(t){if(e.full_response)return t.photoIdsSent=e.photo_ids,t},function(n){throw e.full_response?n.photoIds=e.photo_ids:t[n.fatal?"error":"debug"]("[flickr-photos-setPerms-updater] failed getting or processing API response:",n),n})}e.namespace("ModelUpdaters")["flickr-photos-setPerms"]={run:t}},"@VERSION@",{requires:["flickr-promise"]});
YUI.add("flickr-photos-setMeta-updater",function(e){"use strict";function t(t,n){var r={};return t.fullResponse?(r.photo_ids=t.photoId,r.full_response=1,t.title&&(r.title=t.title),t.description&&(r.description=t.description)):(r.photo_id=t.photoId,r.title=t.title,r.description=t.description),e.Promise.all([n.callAPI("flickr.photos.setMeta",r),n.getModelRegistry("photo-models")]).then(function(e){var r=e[0],i=e[1];if(t.fullResponse){if("errors"in r)return r.api="setMeta",r}else{if(!i.exists(t.photoId))throw new Error("[flickr-photos-setMeta-updater] - Photo model can not be updated if it does not exist");!r.photo||!r.photo.title||!r.photo.description?n.warn("[flickr-photos-setMeta-updater] - No updated data returned from API."):i.setValues(t.photoId,{title:r.photo.title.content,description:r.photo.description.content})}},function(e){throw t.fullResponse?(e.photoIds=t.photoId,e.returnApi="setMeta"):n[e.fatal?"error":"debug"]("[flickr-photos-setMeta-updater] failed getting or processing API response:",e),e})}e.namespace("ModelUpdaters")["flickr-photos-setMeta"]={run:t}},"@VERSION@",{requires:["flickr-promise"],optional:[]});
YUI.add("flickr-photos-licenses-setLicense-updater",function(e){"use strict";function t(e,t){var n={};return e.fullResponse?(n.photo_ids=e.photoId,n.full_response=1):n.photo_id=e.photoId,n.license_id=e.license,t.callAPI("flickr.photos.licenses.setLicense",n).then(function(e){if("errors"in e)return e.api="setLicense",e},function(n){throw e.fullResponse?(n.photoIds=e.photoId,n.returnApi="setLicense"):t[n.fatal?"error":"debug"]("[flickr-photos-licenses-setLicense-updater] failed getting or processing API response:",n),n})}e.namespace("ModelUpdaters")["flickr-photos-licenses-setLicense"]={run:t}},"@VERSION@",{requires:["flickr-promise"]});
YUI.add("flickr-photos-setSafetyLevel-updater",function(e){"use strict";function t(e,t){var n={};return e.fullResponse?(n.photo_ids=e.photoId,n.full_response=1):n.photo_id=e.photoId,n.safety_level=e.safetyLevel+1,t.callAPI("flickr.photos.setSafetyLevel",n).then(function(e){if("errors"in e)return e.api="setSafety",e},function(n){throw e.fullResponse?(n.photoIds=e.photoId,n.returnApi="setSafety"):t[n.fatal?"error":"debug"]("[flickr-photos-setSafetyLevel-updater] failed getting or processing API response:",n),n})}e.namespace("ModelUpdaters")["flickr-photos-setSafetyLevel"]={run:t}},"@VERSION@",{requires:["flickr-promise"]});
YUI.add("photo-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ModelFetchers["flickr-photos-getInfo"].run(t,this.appContext)},update:function(t,n){var r=[];return("title"in n||"description"in n)&&r.push(e.ModelUpdaters["flickr-photos-setMeta"].run({photoId:t,title:n.title?n.title.newVal:this.getValue(t,"title"),description:n.description?n.description.newVal:this.getValue(t,"description")},this.appContext)),"license"in n&&r.push(e.ModelUpdaters["flickr-photos-licenses-setLicense"].run({photoId:t,license:n.license.newVal},this.appContext)),"safetyLevel"in n&&r.push(e.ModelUpdaters["flickr-photos-setSafetyLevel"].run({photoId:t,safetyLevel:n.safetyLevel.newVal},this.appContext)),e.Promise.all(r)},batchUpdate:function(t,n){var r=[];return"safetyLevel"in n&&r.push(e.ModelUpdaters["flickr-photos-setSafetyLevel"].run({photoId:t,safetyLevel:parseInt(n.safetyLevel,10),fullResponse:1},this.appContext)),"title"in n&&"description"in n?r.push(e.ModelUpdaters["flickr-photos-setMeta"].run({photoId:t,title:n.title,description:n.description,fullResponse:1},this.appContext)):"title"in n?r.push(e.ModelUpdaters["flickr-photos-setMeta"].run({photoId:t,title:n.title,fullResponse:1},this.appContext)):"description"in n&&r.push(e.ModelUpdaters["flickr-photos-setMeta"].run({photoId:t,description:n.description,fullResponse:1},this.appContext)),"license"in n&&r.push(e.ModelUpdaters["flickr-photos-licenses-setLicense"].run({photoId:t,license:n.license,fullResponse:1},this.appContext)),e.Promise.all(r)}},attributes:{owner:{isModel:!0},engagement:{isModel:!0},title:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)},defaultValue:""},description:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)},defaultValue:""},mediaType:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)},defaultValue:"photo"},isVideo:{readOnly:!0,derivedBy:["mediaType"],getter:function(e,t){var n=this.getValue(t,"mediaType");return n==="video"}},isOwner:{readOnly:!0,derivedBy:["owner"],getter:function(e,t){var n=this.getValue(t,"owner"),r=this.appContext.getViewer();return!!r.signedIn&&n.getValue("id")===r.nsid}},sizes:{},descendingSizes:{readOnly:!0,derivedBy:["sizes"],defaultFn:function(e){var t,n,r=[];this._descendingSizesMemo=this._descendingSizesMemo||{};if(this._descendingSizesMemo[e])return this._descendingSizesMemo[e];t=this.getValue(e,"sizes");for(n in t)r.push(t[n]),r[r.length-1].key=n;return r.sort(function(e,t){return e.width<t.width?1:e.width===t.width?e.height<t.height?1:e.height===t.height?e.key==="o"?-1:1:-1:-1}),this._descendingSizesMemo[e]=r,r}},ascendingSizes:{readOnly:!0,derivedBy:["descendingSizes"],defaultFn:function(e){return this.getValue(e,"descendingSizes").reverse()}},aspectRatio:{readOnly:!0,derivedBy:["descendingSizes","rotation"],defaultFn:function(e){var t=this.getValue(e,"descendingSizes")[0];return t.key==="o"&&this.getValue(e,"rotation")%180!==0?t.height/t.width:t.width/t.height}},isHD:{},secret:{},needsInterstitial:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},canComment:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!0},canAddMeta:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!0},license:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},isMarketplacePrintable:{defaultFn:function(e){return!1}},oWidth:{},oHeight:{},safetyLevel:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},url:{readOnly:!0,derivedBy:["owner"],defaultFn:function(e){var t=this.getValue(e,"owner");return t?"/photos/"+t.getValue("pathAlias")+"/"+e:undefined}},guestpass:{},rotation:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},hasInvalidColorspaceForPrint:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1}},getLargestSize:function(e,t){return this.getSizeToFit(e,{width:Number.MAX_VALUE,height:Number.MAX_VALUE},t)},getGuestpass:function(t){var n=this;return new e.Promise(function(e,r){n.getValue(t,"guestpass")?e():n.appContext.callAPI("flickr.sharing.createGuestpass",{photo:t}).then(function(r){n.setValue(t,"guestpass",r.guestpass.url),e()})})},getSizeToFit:function(t,n,r){r=r||{};var i=this,s,o=n.width,u=n.height,a=!!r.cropToFit,f=r.includeSquare,l=this.getValue(t,"sizes"),c=r.excludeSizes||["o"],h=r.includeSizes||Object.keys(l),p,d,v;return this._getSizeToFitMemo=this._getSizeToFitMemo||{},s=[t,o,u,a,c.sort().join(""),h.sort().join("")].join("_"),this._getSizeToFitMemo[s]||(e.Object.each(l,function(e,n){var r,i,s,l,m,g;if(e&&c.indexOf(n)===-1&&h.indexOf(n)>-1)if(f||!this.isSizeSquare(n)||this.isPhotoSquare(t)){r=parseInt(e.width,10),i=parseInt(e.height,10),a&&r>=o&&i>=u?s=!0:!a&&(r>=o||i>=u)&&(s=!0),s&&(p?(l=parseInt(p.height,10),i<l&&(p=e)):p=e);if(d){m=parseInt(d.width,10),g=parseInt(d.height,10);if(r>m||i>g)d=e}else d=e}v=p||d},this),this._getSizeToFitMemo[s]=v,this._getSizeToFitMemoTimer||(this._getSizeToFitMemoTimer=setTimeout(function(){delete i._getSizeToFitMemo,delete i._getSizeToFitMemoTimer},1e4))),e.clone(this._getSizeToFitMemo[s],!0)},getSizeIfExact:function(e,t){var n=this.getValue(e,"sizes"),r,i;return Object.keys(n).some(function(e){return e==="o"?!1
:(i=n[e],t.height===i.height&&t.width===i.width?(r=i,!0):!1)}),r},isSizeSquare:function(e){var t={sq:"sq",q:"q"};return!!t[e]},isPhotoSquare:function(t){var n;return this._isPhotoSquareMemo=this._isPhotoSquareMemo||{},typeof this._isPhotoSquareMemo[t]!="undefined"?n=this._isPhotoSquareMemo[t]:(n=!0,e.Object.some(this.getValue(t,"sizes"),function(e,t){var r;if(e&&e.width&&e.height&&!this.isSizeSquare(t)){r=parseInt(e.width,10)/parseInt(e.height,10);if(r!==1)return n=!1,!0}},this),this._isPhotoSquareMemo[t]=n),n}})},"@VERSION@",{requires:["flickr-model-registry","flickr-promise","flickr-photos-getInfo-fetcher","flickr-photos-setPerms-updater","flickr-photos-setMeta-updater","flickr-photos-licenses-setLicense-updater","flickr-photos-setSafetyLevel-updater","attribute-helpers"]});
YUI.add("flickr-photos-getInfo-fetcher",function(e){"use strict";function t(t){var n,r;return n=["sizes","icon_urls","ignored","rev_ignored","tags","autotags","venue","datecreate","is_marketplace_printable","o_dims"].join(","),n=n+","+e.APIHelper.request.getRebootPhotoExtras(),r={datecreate:1,extras:n,photo_id:t.id,get_contexts:1,primary_photo_extras:"url_sq, url_t, url_s, url_m"},t.userId?r.user_id=t.userId:t.pathAlias&&(r.path_alias=t.pathAlias),t.context&&(r.context=t.context,r.num_prev=1,r.num_next=1),t.scrappy&&(e.APIHelper.request.addStaticMapsParams(r),delete r.get_contexts,delete r.primary_photo_extras,delete r.context),r}function n(t,n,i){var s=t.apiResponse,o=t.photoRegistry,u=t.personRegistry,a=t.personRelationshipRegistry,f=t.photoEngagementRegistry,l=t.photoStatsRegistry,c=t.photoPrivacyRegistry,h=t.photoTagsRegistry,p=t.tagRegistry,d=t.photoAutotagsRegistry,v=t.autotagRegistry,m=t.photoNotesRegistry,g=t.noteRegistry,y=t.photoGeoRegistry,b=t.photoLocationRegistry,w=t.photoHeadMetaRegistry,E=t.groupRegistry,S,x={},T,N,C,k,L,A,O=[],M=[],_=[],D,P,H;T={id:s.photo.id,title:s.photo.title.content,description:s.photo.description.content,sizes:e.APIHelper.response.parsePhotoSize(s.photo.sizes.size,!0),needsInterstitial:s.photo.needsInterstitial,canComment:s.photo.editability.cancomment,canAddMeta:s.photo.editability.canaddmeta,safetyLevel:s.photo.safetyLevel,license:s.photo.license,mediaType:s.photo.media,secret:s.photo.secret,isHD:e.APIHelper.response.isHD(s.photo.sizes.size),rotation:s.photo.rotation,hasInvalidColorspaceForPrint:s.photo.hasInvalidColorspaceForPrint,isMarketplacePrintable:s.photo.isMarketplacePrintable,oWidth:s.photo.oWidth?parseInt(s.photo.oWidth,10):"",oHeight:s.photo.oHeight?parseInt(s.photo.oHeight,10):""},N={id:s.photo.owner.nsid,username:s.photo.owner.username,realname:s.photo.owner.realname,pathAlias:s.photo.owner.pathAlias,buddyicon:e.APIHelper.response.agnosticizeFarmPathTransferProtocol(s.photo.owner.iconurls),isAdFree:s.photo.owner.isAdFree,isPro:s.photo.owner.ispro},C={id:s.photo.owner.nsid,pathAlias:s.photo.owner.pathAlias,isContact:s.photo.contactIscontact,isFamily:s.photo.contactIsfamily,isFriend:s.photo.contactIsfriend,isIgnored:s.photo.owner.isignored,isIgnoredBy:s.photo.owner.revIgnored},k={id:s.photo.id,ownerNsid:s.photo.owner.nsid,isFaved:s.photo.isfavorite||!1,canShare:s.photo.usage.canshare,canDownload:s.photo.usage.candownload,commentCount:s.photo.comments.content,noteCount:s.photo.notes&&s.photo.notes.note&&s.photo.notes.note.length,faveCount:s.photo.countFaves,viewCount:s.photo.views},L={id:s.photo.id,dateTaken:s.photo.dates.taken,datePosted:s.photo.dates.posted,takenGranularity:s.photo.dates.takengranularity},D={id:s.photo.id,"og:title":s.photo.HTMLMETA["og:title"],"og:description":s.photo.HTMLMETA["og:description"],"og:type":s.photo.HTMLMETA["og:type"],"og:url":s.photo.HTMLMETA["og:url"],"og:site_name":s.photo.HTMLMETA["og:site_name"],"og:image":s.photo.HTMLMETA["og:image"],"og:image:width":s.photo.HTMLMETA["og:image:width"],"og:image:height":s.photo.HTMLMETA["og:image:height"],"flickr_photos:by":s.photo.HTMLMETA["flickr_photos:by"],"flickr_photos:camera":s.photo.HTMLMETA["flickr_photos:camera"],"flickr_photos:sets":s.photo.HTMLMETA["flickr_photos:sets"],"flickr_photos:groups":s.photo.HTMLMETA["flickr_photos:groups"],"flickr_photos:galleries":s.photo.HTMLMETA["flickr_photos:galleries"],"twitter:card":s.photo.HTMLMETA["twitter:card"],"twitter:site":s.photo.HTMLMETA["twitter:site"],"twitter:app:name:iphone":s.photo.HTMLMETA["twitter:app:name:iphone"],"twitter:description":s.photo.HTMLMETA["twitter:description"],"twitter:app:url:iphone":s.photo.HTMLMETA["twitter:app:url:iphone"],"twitter:creator":s.photo.HTMLMETA["twitter:creator"],pinterest:s.photo.HTMLMETA.pinterest},A={id:s.photo.id,isPublic:s.photo.visibility.ispublic,isVisibleByFriends:s.photo.visibility.isfriend,isVisibleByFamily:s.photo.visibility.isfamily,permAddMeta:s.photo.permissions?s.photo.permissions.permaddmeta:0,permComment:s.photo.permissions?s.photo.permissions.permcomment:0},s.photo&&s.photo.tags&&s.photo.tags.tag&&e.Array(s.photo.tags.tag).forEach(function(e){p.exists(e.id)||p.add({id:e.id,tagRaw:e.raw,tagValue:n.isFlipped("tags-charm")?e.content:e.content.replace(/\s/g,""),tagAuthorNSID:e.author,isMachineTag:e.machineTag}),O.push(p.proxy(e.id))}),s.photo&&s.photo.autotags&&s.photo.autotags.autotag&&e.Array(s.photo.autotags.autotag).forEach(function(e){v.exists(s.photo.id+e.content)||v.add({id:s.photo.id+e.content,autotagValue:e.content}),_.push(v.proxy(s.photo.id+e.content))}),s.photo&&s.photo.notes&&s.photo.notes.note&&e.Array(s.photo.notes.note).forEach(function(e){g.exists(e.id)||g.add({id:e.id,authorName:e.authorname,author:e.author,left:e.x,top:e.y,width:e.w,height:e.h,text:e.content}),M.push(g.proxy(e.id))}),P=e.ModelFetchers["flickr-photos-getLocation"].mapResponse(s,y),T.owner=u.exists(N.id)?u.proxy(N.id):u.add(N),T.engagement=f.exists(k.id)?f.proxy(k.id):f.add(k),a.exists(C.id)||a.add(C),H=o.exists(T.id)?o.proxy(T.id):o.add(T),s.photo.isMarketplacePrintable&&H.setValue("isMarketplacePrintable",!0),l.exists(T.id)||l.add(L),c.exists(T.id)||c.add(A),h.exists(T.id)||h.add({id:T.id,tags:O}),d.exists(T.id)||d.add({id:T.id,autotags:_}),m.exists(T.id)||m.add({id:T.id,notes:M}),w.exists(T.id)||w.add(D),b.exists(T.id)||b.add(P),s.photo.contexts&&(S=t.contextsRegistry,x.faves=t.favoriteRegistry,x.gallery=t.galleryRegistry,x.pool=t.groupsPoolRegistry,x.set=t.setRegistry,x.stream=t.photostreamRegistry,r({photoModel:H,contextRegistries:x,contextsResponse:s.photo.contexts,personRegistry:u,contextsRegistry:S,photoEngagementRegistry:f,photoStatsRegistry:l,groupRegistry:E,apiParams:i}))}function r(t){var n=t.photoModel,r=t.contextRegistries,i=t.contextsResponse,s=t.personRegistry,o=t.contextsRegistry,u=t.photoEngagementRegistry,a=t.photoStatsRegistry,f=t.groupRegistry,l=t.apiParams,c=[];e.Object.each(r,function(t,r){i[r]&&e.Array.each(i[r],function(r){e.APIHelper.response.addContextToRegistry
(r,t,s,f),c.push(t.proxy(r.id)),l.context&&function(){var i,o,f,c,h,p,d,v,m;i=t.getValue(r.id,"photoContextList"),o=i.hasMinBoundary?i.hasMinBoundary():!1,f=i.hasMaxBoundary?i.hasMaxBoundary():!1,c=i.getList(),p=r.nextphotos,d=r.prevphotos,v=p?e.APIHelper.response.parsePhotos({photos:p.photo,personModelRegistry:s,photoModelRegistry:n.registry,photoEngagementModelRegistry:u,photoStatsModelRegistry:a}):[],m=d?e.APIHelper.response.parsePhotos({photos:d.photo,personModelRegistry:s,photoModelRegistry:n.registry,photoEngagementModelRegistry:u,photoStatsModelRegistry:a}):[];if(m.length||v.length)h=e.APIHelper.response.addOrReplaceListByContext({model:n,next:v,prev:m.reverse(),current:c,hasMin:o,hasMax:f,numNext:l.num_next,numPrev:l.num_prev});t.setValue(r.id,"photoContextList",h)}()})}),o.exists(n.id)||(o.add({id:n.id,totalGroups:i.pool?i.pool.length:0,totalSets:i.set?i.set.length:0,totalGalleries:i.gallery?i.gallery.length:0}),o.setValue(n.id,"contexts",c))}function i(t,n){var r=this,i;return n.flipper.isFlipped("enable-scrappy-photo-page")&&(t.scrappy=!0),i=this._processParams(t),(new e.FlickrPromise({apiResponse:n.callAPI("flickr.photos.getInfo",i),photoRegistry:n.getModelRegistry("photo-models"),personRegistry:n.getModelRegistry("person-models"),personRelationshipRegistry:n.getModelRegistry("person-relationship-models"),photoEngagementRegistry:n.getModelRegistry("photo-engagement-models"),photoStatsRegistry:n.getModelRegistry("photo-stats-models"),photoPrivacyRegistry:n.getModelRegistry("photo-privacy-models"),photoTagsRegistry:n.getModelRegistry("photo-tags-models"),tagRegistry:n.getModelRegistry("tag-models"),photoAutotagsRegistry:n.getModelRegistry("photo-autotags-models"),autotagRegistry:n.getModelRegistry("autotag-models"),photoNotesRegistry:n.getModelRegistry("photo-notes-models"),noteRegistry:n.getModelRegistry("note-models"),photoGeoRegistry:n.getModelRegistry("photo-geo-models"),photoLocationRegistry:n.getModelRegistry("photo-location-models"),photoHeadMetaRegistry:n.getModelRegistry("photo-head-meta-models"),groupRegistry:n.getModelRegistry("group-models"),contextsRegistry:n.getModelRegistry("photo-contexts-models"),favoriteRegistry:n.getModelRegistry("favorite-models"),galleryRegistry:n.getModelRegistry("gallery-models"),groupsPoolRegistry:n.getModelRegistry("group-pool-models"),setRegistry:n.getModelRegistry("set-models"),photostreamRegistry:n.getModelRegistry("photostream-models")})).then(function(e){return r._processResponse(e,n.flipper,i)},function(e){throw n[e.fatal?"error":"debug"]("[flickr-photos-getInfo-fetcher] failed getting or processing API response:",e),e})}e.namespace("ModelFetchers")["flickr-photos-getInfo"]={run:i,_processParams:t,_processResponse:n}},"@VERSION@",{requires:["flickr-promise","api-helper","flickr-photos-getLocation-fetcher"],optional:["photo-models","person-models","person-relationship-models","photo-engagement-models","photo-stats-models","photo-geo-models","photo-location-models","photo-head-meta-models","note-models","photo-notes-models","autotag-models","photo-autotags-models"]});
YUI.add("photo-geo-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ModelFetchers["flickr-photos-getInfo"].run(t,this.appContext).then(function(e){return e},function(){})}},attributes:{hasGeo:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},latitude:{},longitude:{}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-promise","flickr-photos-getInfo-fetcher","attribute-helpers"]});
YUI.add("zoom-view",function(e){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return YUI.Env.isServer||(this.photoId=e.photoId,this.disableIfSmall=!!e.disableIfSmall),this},loadState:function(){var e=this;return this.appContext.getModel("photo-models",e.photoId).then(function(t){e.set("photo",t)})},buildContainer:function(){var e=this.templates("zoom")({});return this.setContainerHTML(e),this},activate:function(){var t=this,n=t.getZoomKeyScope();return this.get("photo").getValue("needsInterstitial")||(this.parentViewContainer=this.get("container").ancestor(".view"),t.registerEventHandler(t.get("container").on("click",function(n){n.preventDefault(),t.cursorCoords=[n.pageX-e.config.win.pageXOffset,n.pageY-e.config.win.pageYOffset],e.rapidTracker.beacon(t.name,"zoomInClick"),t.zoomIn(t.cursorCoords)})),t.attachKeyEvent("down:90",e.betterThrottle(function(n){n.preventDefault(),e.rapidTracker.beacon(t.name,"zoomInKeyPress"),t.zoomIn()},100)),t.attachKeyEvent("down:90,27",e.betterThrottle(function(n){n.preventDefault(),e.rapidTracker.beacon(t.name,"zoomOutKeyPress"),t.zoomOut()},100),n),t.attachKeyEvent("down:37,38,39,40",e.betterThrottle(function(n){var r=[t.currentZoomRegion.left,t.currentZoomRegion.top],i=200;n.preventDefault();switch(n.button){case 37:r[0]+=i;break;case 38:r[1]+=i;break;case 39:r[0]-=i;break;case 40:r[1]-=i}e.rapidTracker.beacon(t.name,"zoomPanKeyPress"),t.panZoomNode(r)},16),n),t.registerEventHandler(t.appContext.flapp.before("activeViewChange",function(e){t.cleanUp()}))),this},getZoomEdgeMargin:function(){return 100},panZoomNodeToCurrentCoords:function(){this.panTicking=!1;if(!this.zoomedIn)return;var e=this.cursorCoords,t=this.getZoomPanCoordsForCursor(e);if(!t)return;this.panZoomNode(t)},panZoomNode:function(e){if(this.currentZoomRegion.left===e[0]&&this.currentZoomRegion.top===e[1])return;e=this.constrainPanCoords(e),this.currentZoomRegion.left=e[0],this.currentZoomRegion.top=e[1],this.pendingCoords=e},constrainPanCoords:function(e){var t,n,r,i,s=this.getZoomEdgeMargin(),o=[this.appContext.viewportData.getWidth(),this.appContext.viewportData.getHeight()],u=[this.zoomImageFullWidth,this.zoomImageFullHeight],a=[u[0]+2*s,u[1]+2*s];return t=0,n=o[0]-u[0]-2*s,r=0,i=o[1]-u[1]-2*s,e[0]>t?e[0]=t:e[0]<n&&(e[0]=n),e[1]>r?e[1]=r:e[1]<i&&(e[1]=i),u[0]<o[0]&&(e[0]=.5*(o[0]-a[0])),u[1]<o[1]&&(e[1]=.5*(o[1]-a[1])),e},getZoomPanCoordsForCursor:function(e){if(!e)return;var t=this.getZoomEdgeMargin(),n=[this.appContext.viewportData.getWidth(),this.appContext.viewportData.getHeight()],r=[this.zoomImageFullWidth,this.zoomImageFullHeight],i=[r[0]+2*t,r[1]+2*t],s=[e[0]/n[0],e[1]/n[1]],o=[s[0]*(n[0]-i[0]),s[1]*(n[1]-i[1])];return o},getZoomSmallRegion:function(){var t=this.get("container");return{left:t.getX()-e.config.win.pageXOffset-this.getZoomEdgeMargin(),top:t.getY()-e.config.win.pageYOffset-this.getZoomEdgeMargin(),width:parseInt(t.getStyle("width"),10),height:parseInt(t.getStyle("height"),10)}},resizeZoomNode:function(t,n){var r=this,i,s,o=e.config.win.performance&&e.config.win.performance.now;return n?new e.Promise(function(n,u){function a(e){var u=o?e-i:Date.now()-i,a=u/r.getZoomTransitionTime(),f;return a>=1?(f=t,r.isAnimatingZoom=!1,setTimeout(function(){n()},r.getZoomTransitionTime())):f={left:s.left+(t.left-s.left)*a,top:s.top+(t.top-s.top)*a,width:s.width+(t.width-s.width)*a,height:s.height+(t.height-s.height)*a},f}function f(n){var i=a(n);if(r.zoomingIn||r.zoomingOut)r.resizeZoomNode(i,!1),i!==t&&e.config.win.requestAnimationFrame(f)}r.isAnimatingZoom=!0,i=o?e.config.win.performance.now():Date.now(),s=r.currentZoomRegion,e.config.win.requestAnimationFrame(f)}):(this.currentZoomRegion=t,this.zoomPhotoContainerNode.setStyle("transform","translate("+t.left+"px, "+t.top+"px) scale("+t.width/this.zoomImageFullWidth+")"),e.Promise.resolve())},getZoomTransitionTime:function(){return 200},zoomOut:function(){var t=this,n=this.zoomNode;e.fire("flickr:removeKeyEventScope",this.getZoomKeyScope()),n.detachAll("mousemove"),this.mouseWheelHandler&&this.mouseWheelHandler.detach(),this.touchHandlers&&(this.touchHandlers.forEach(function(e){e.detach()}),delete this.touchHandlers),this.resizeZoomNode(this.getZoomSmallRegion(),!0),n.addClass("hiding"),this.zoomedIn=!1,this.zoomingIn=!1,this.zoomingOut=!0,setTimeout(function(){t.zoomingOut&&n&&n._node&&(t.parentViewContainer.removeClass("zoomed"),n.removeClass("hiding"),n.addClass("hidden"),setTimeout(function(){t.zoomingOut&&(t.cleanUp(),this.zoomingOut=!1)},200))},this.getZoomTransitionTime()+200),delete this.panTicking},cleanUp:function(){this.zoomNode&&(this.zoomNode.remove(!0),delete this.zoomNode,delete this.zoomPhotoContainerNode,this.zoomAnimationHandle.detach())},isImageReadyToDisplay:function(e){var t;return e?(t=new Image,t.src=e,t.complete||t.naturalWidth):!1},getZoomKeyScope:function(){return this.name+this._yuid},zoomMouseMoveHandler:function(t){this.cursorCoords=[t.pageX-e.config.win.pageXOffset,t.pageY-e.config.win.pageYOffset],this.isAnimatingZoom||this.panZoomNodeToCurrentCoords()},zoomScrollWheelHandler:function(e){e.preventDefault();var t=e.wheelDeltaX,n=e.wheelDeltaY;t===undefined&&(t=-e.deltaX||0),n===undefined&&(n=-e.deltaY||0),this.panZoomNode([this.currentZoomRegion.left+t,this.currentZoomRegion.top+n])},getSizes:function(){var e=this.parentViewContainer.one(".low-res-photo"),t=this.parentViewContainer.one(".main-photo");return{small:e?e.getAttribute("src"):"",medium:t?t.getAttribute("src"):"",large:this.getLargestSize()}},getLargestSize:function(){var e=this.appContext.flipper.isFlipped("enable-zoom-proxy"),t=this.appContext.flipper.config["zoom-proxy-prefix"],n;return e&&t?(n=this.get("photo").getLargestSize({excludeSizes:[]}),n.key==="o"&&(console.log("proxyPrefix",t,"largestSize.displayUrl",n.displayUrl),n.displayUrl=n.url=t+"http:"+n.displayUrl,console.log("proxying original",n.url))):n=this.get("photo").getLargestSize(),n},zoomIn:function(t){var n=this,r,i
,s=this.getSizes(),o=this.isImageReadyToDisplay(s.medium),u=this.isImageReadyToDisplay(s.large.url),a=this.getZoomPixelRatio(),f=this.getZoomSmallRegion(),l,c,h,p=this.maxMsgNode;if(this.disableIfSmall&&f.width>=s.large.width){p||(p=this.maxMsgNode=e.Node.create('<div class="zoom-max-message">'+n.intlMessage({intlName:"photo-page-scrappy.ZOOM_MAX_MESSAGE"})+"</div>")),this.get("container").contains(p)||(p.addClass("hidden"),this.get("container").append(p)),setTimeout(function(){p&&p.inDoc()&&(p.removeClass("hidden"),this.maxMsgNodeHidingTimer&&(clearTimeout(this.maxMsgNodeHidingTimer),delete this.maxMsgNodeHidingTimer),this.maxMsgNodeHidingTimer=setTimeout(function(){p&&p.inDoc()&&p.addClass("hidden")},3e3))},0);return}e.fire("flickr:setKeyEventScope",this.getZoomKeyScope()),this.zoomingIn=!0,this.zoomAnimationHandle=e.AnimationManager.subscribe(function(){n.pendingCoords&&(n.zoomPhotoContainerNode.setStyle("transform","translate("+n.pendingCoords[0]+"px, "+n.pendingCoords[1]+"px)"),delete n.pendingCoords)}),this.zoomNode?(this.zoomingOut=!1,r=this.zoomNode,r.removeClass("hiding"),r.detachAll("mousemove"),this.mouseWheelHandler&&this.mouseWheelHandler.detach(),this.touchHandlers&&(this.touchHandlers.forEach(function(e){e.detach()}),delete this.touchHandlers)):r=this.zoomNode=e.Node.create(this.templates("zoom-modal")({disableTransitions:!!e.UA.gecko,smallSrc:o?s.medium:s.small,largeSrc:u?s.large.url:""})),i=this.zoomPhotoContainerNode=r.one(".zoom-photo-container"),this.zoomImageFullWidth=s.large.width/a,this.zoomImageFullHeight=s.large.height/a,t||(t=[this.appContext.viewportData.viewport.width/2,this.appContext.viewportData.viewport.height/2],n.cursorCoords=t),l=this.getZoomPanCoordsForCursor(t),l=this.constrainPanCoords(l),c={left:l[0],top:l[1],width:this.zoomImageFullWidth,height:this.zoomImageFullHeight},i.setStyle("transition","none"),this.resizeZoomNode(f,!1),r.on("click",function(t){if(n.zoomingIn)return;t.preventDefault(),e.rapidTracker.beacon(n.name,"zoomOutClick"),n.zoomOut()}),e.one("body").append(r),i.setStyle("width",c.width),i.setStyle("height",c.height),e.soon(function(){n.zoomingIn&&(r.removeClass("hidden"),i.setStyle("transition",""),"ontouchstart"in document?e.use("event-touch",function(){n.touchHandlers=[],n.touchHandlers.push(e.on("touchstart",function(e){e.changedTouches.length&&e.changedTouches.length===1&&(n.touching=[e.changedTouches[0].pageX,e.changedTouches[0].pageY])})),n.touchHandlers.push(e.on("touchmove",function(e){var t=e.pageX,r=e.pageY,i,s;n.touching&&e.changedTouches.length&&e.changedTouches.length===1&&(t=e.changedTouches[0].pageX,r=e.changedTouches[0].pageY,e.preventDefault(),i=t-n.touching[0],s=r-n.touching[1],n.touching=[t,r],n.panZoomNode([n.currentZoomRegion.left+i,n.currentZoomRegion.top+s]))})),n.touchHandlers.push(e.on("touchend",function(e){delete n.touching}))}):(r.on("mousemove",n.zoomMouseMoveHandler.bind(n)),n.mouseWheelHandler=function(){var e=n.zoomScrollWheelHandler.bind(n);return h="onwheel"in document.createElement("div")?"wheel":"mousewheel",document.addEventListener(h,e,!1),{detach:function(){document.removeEventListener(h,e,!1)}}}()),n.parentViewContainer.addClass("zoomed"),n.resizeZoomNode(c,!0).then(function(){n.zoomingIn&&(n.zoomingIn=!1,n.zoomedIn=!0,n.panZoomNodeToCurrentCoords(),u||i.append('<img src="'+s.large.url+'" class="zoom-large">'))}))})},getZoomPixelRatio:function(){return 1}})},"@VERSION@",{requires:["flickr-view","better-throttle","flickr-promise","zoom-css","hermes-template-zoom","hermes-template-zoom-modal","animation-manager"],optional:["photo-models"],langBundles:["photo-page-scrappy"]});
YUI.add("hermes-lang-photo-page-scrappy_es-us",function(e,t){e.Intl.add("hermes/photo-page-scrappy","es-US",{PAGE_TITLE:["${title}","Fickr \u00a1Para compartir fotos!"],BACK_TO:["Volver a ","${entryType}"],COULDNT_UPDATE_SETTINGS:["No pudimos actualizar tus ajustes"],ADULT_CONTENT:["Contenido para adultos"],MATURE_AUDIENCES:["Este contenido es s\u00f3lo para adultos."],USER_DISCRETION:["Se recomienda discreci\u00f3n."],SHOW_ME_THIS_CONTENT_TYPE:["De ahora en adelante, mostrarme este tipo de contenido"],CHANGE_SAFE_SEARCH_IN_SETTINGS:['Siempre podr\u00e1s cambiar las <a href="/account/prefs/safesearch/?from=privacy"  data-track="photoWellSafeSearchClick">configuraciones de B\u00fasqueda segura</a> en las preferencias de tu cuenta.'],SIGNED_IN_FOR_CONTENT:["Debes iniciar sesi\u00f3n para ver este contenido."],VIDEO_COMING_SOON:["Pronto estar\u00e1 disponible el soporte de videos"],FIND_OUT_MORE_AD:["Descubre m\u00e1s en ","${brand}"],SHARE_THIS_PHOTO:["Compartir esta foto"],DOWNLOAD_THIS_VIDEO:["Descargar este video"],DOWNLOAD_THIS_PHOTO:["Descargar esta foto"],VIEW_ALL_SIZES:["Ver todos los tama\u00f1os"],DOWNLOAD_PHOTO:["Descargar foto"],SOME_RIGHTS_RESERVED:["Algunos derechos reservados"],DOWNLOAD:["Descargar"],ERROR_LOADING_CONTEXT:["Error al cargar el contexto"],ADD_TITLE:["A\u00f1adir t\u00edtulo"],ADD_DESCRIPTION:["A\u00f1adir descripci\u00f3n"],TITLE_DESCRIPTION_FAILURE:["En este momento no pudimos cambiar el t\u00edtulo y la descripci\u00f3n."],VIEW_PREVIOUS_COMMENT:["Ver el comentario anterior"],VIEW_MORE_PREVIOUS_COMMENTS:["Ver ","${count}"," comentarios previos"],EMPTY_COMMENT_ERROR:["\u00bfUn cuadro de comentarios vac\u00edo? \u00a1Eso no funcionar\u00e1!"],COMMENT_RATE_LIMIT_ERROR:["\u00a1B\u00e1jale, amigo! Para proteger a la comunidad Flickr contra el spam y contra comportamientos que parece spam, implementamos unas cuantas restricciones en los comentarios."],COMMENT_POST_ERROR:["No pudimos publicar tu comentario."],MORE_COMMENTS_ERROR:["No pudimos obtener m\u00e1s comentarios."],COMMENT_PERMALINK_ERROR:["No pudimos encontrar el comentario especificado en esta foto."],DELETE_COMMENT:["Eliminar comentario"],COMMENT_DELETE_CONFIRMATION:["\u00bfEst\u00e1s seguro que deseas eliminar este comentario?"],COMMENT_DELETE_ERROR:["No pudimos eliminar tu comentario."],COMMENT_LOADING_ERROR:["Error al cargar comentarios"],COMMENT:["Comentar"],SHOW_MORE_COMMENTS:["${count}"," m\u00e1s"],REPLY:["Responder"],PERMALINK:["Enlace permanente"],SINGLE_FAVER:['<a class="faved-by-person-link" href="/photos/',"${pathAlias}",'/">',"${displayName}","</a> marc\u00f3 esto como favorito"],DOUBLE_FAVER:['<a class="faved-by-person-link" href="/photos/',"${pathAliasOne}",'/">',"${displayNameOne}",'</a> y <a class="faved-by-person-link" href="/photos/',"${pathAliasTwo}",'/">',"${displayNameTwo}","</a> marcaron esta foto como favorito"],TRIPLE_FAVER:['<a class="faved-by-person-link" href="/photos/',"${pathAliasOne}",'/">',"${displayNameOne}",'</a>, <a class="faved-by-person-link" href="/photos/',"${pathAliasTwo}",'/">',"${displayNameTwo}",'</a> y <a class="faved-by-person-link" href="/photos/',"${pathAliasThree}",'/">',"${displayNameThree}","</a> marcaron esta foto como favorito"],MULTI_FAVER:['<a class="faved-by-person-link" href="/photos/',"${pathAliasOne}",'/">',"${displayNameOne}",'</a>, <a class="faved-by-person-link" href="/photos/',"${pathAliasTwo}",'/">',"${displayNameTwo}",'</a> y <a class="remaining-faved-by" href="#">',"${count}"," personas m\u00e1s</a> marcaron esta foto como favorito"],RELATIONSHIP_FRIEND_ERROR:["Ocurri\u00f3 un error al ajustar la relaci\u00f3n con tu amigo."],RELATIONSHIP_FAMILY_ERROR:["Hubo un problema al configurar la relaci\u00f3n con tu familia."],HIDE_EXIF:["Ocultar EXIF"],SHOW_EXIF:["Mostrar EXIF"],EDIT_LOCATION:["Editar lugar"],EDIT_LOCATION_ORGANIZR:["Estamos trabajando duro para redise\u00f1ar nuestra experiencia fotogr\u00e1fica nueva. A partir de ahora, puedes Editar ubicaci\u00f3n en Organizr."],APERTURE:["Apertura"],FOCAL_LENGTH:["Distancia focal"],EXPOSURE_TIME:["Tiempo de exposici\u00f3n"],FLASH_AUTO_FIRED:["Flash (auto, dispar\u00f3)"],FLASH_AUTO_NO_FIRE:["Flash (auto, no dispar\u00f3)"],FLASH_ON_FIRED:["Flash (encendido, dispar\u00f3)"],FLASH_ON_NO_FIRE:["Flash (encendido, no dispar\u00f3)"],FLASH_OFF:["Flash (apagado, no dispar\u00f3)"],POWERED_BY:["IMPULSADO POR"],FOURSQUARE:["FOURSQUARE"],ADD_PHOTO_TO_MAP:["A\u00f1adir esta foto a tu mapa"],SINGULAR_FAVE:["favorito"],PLURAL_FAVE:["favoritos"],SINGULAR_VIEW:["visita"],PLURAL_VIEW:["visitas"],SINGULAR_COMMENT:["comentario"],PLURAL_COMMENT:["comentarios"],LICENSE_ERROR:["Ocurri\u00f3 un error al cambiar la licencia de tu foto"],ALL_RIGHTS_RESERVED:["Todos los derechos reservados"],NO_RESTRICTIONS:["Sin restricciones de derechos por autor conocidas"],USA_GOV_WORK:["Trabajo del gobierno de los Estados Unidos"],SAFETY_CHANGE_ERROR:["Ocurri\u00f3 un error al cambiar el nivel de seguridad de tu foto."],PRIVACY_CHANGE_ERROR:["Ocurri\u00f3 un error al cambiar la privacidad de tu foto"],COMMENT_PERM_CHANGE_ERROR:["Ocurri\u00f3 un error al cambiar los permisos para comentar tu foto"],FLAG_PHOTO:["Denunciar esta foto"],MARK_FOR_REVIEW:["Marcar para revisi\u00f3n"],ADDITIONAL_INFO:["Informaci\u00f3n adicional"],VIEWING_THIS_PHOTO:["Qui\u00e9n puede ver esta foto"],PRIVACY_UPDATE_ERROR:["Ocurri\u00f3 un error al actualizar la privacidad. Vuelve a intentarlo por favor."],META_PERMS_UPDATE_ERROR:["There was an error while updating add meta permission. Please try again."],ADD_META_TO_THIS_PHOTO:["Add tags and people to this photo"],COMMENT_PERMS_UPDATE_ERROR:["Ocurri\u00f3 un error al actualizar los permisos de comentarios. Vuelve a intentarlo por favor."],COMMENTING_ON_THIS_PHOTO:["Comentando sobre esta foto"],SAFETY_UPDATE_ERROR:["Ocurri\u00f3 un error al actualizar el nivel de privacidad. Vuelve a intentarlo por favor."],SAFETY_LEVEL_OF_PHOTO:["Nivel de seguridad de esta foto"],FLAG_ERROR:["Ocurri\u00f3 un error al tratar de marcar esta foto. Vuelve a intentarlo por favor."
],PROVIDE_FEEDBACK:["Danos tu opini\u00f3n sobre la nueva p\u00e1gina de fotos"],ERROR_DELETING_AUTOTAG:["Erro al borrar la Etiqueta autom\u00e1tica"],AUTOTAGS:["Etiquetas autom\u00e1ticas"],CONTACT_LIST_ERROR:["Ocurri\u00f3 un error al tratar de obtener tu lista de contactos. Vuelve a intentarlo por favor."],FAILED_TO_REMOVE_PERSON:["En este momento no se pudo quitar a esa persona de la foto."],PERSON_CANNOT_BE_TAGGED:["No se pudo etiquetar a esta persona."],PEOPLE_IN_PHOTO:["Gente en la foto"],ADD_PEOPLE:["A\u00f1adir personas"],ADD_PERSON:["A\u00f1adir persona"],ERROR_REMOVING_FROM_GROUP:["Hubo un problema al quitar esta foto del grupo"],ERROR_ACCEPTING_INVITATION:["Hubo un problema al aceptar la invitaci\u00f3n del grupo"],SEARCH_GROUPS:["Buscar grupos"],PHOTO_NOT_IN_GROUPS:["En este momento esta foto no est\u00e1 en ning\u00fan grupo"],ADD_TO_GROUP:["A\u00f1adir a un grupo"],INVITE_TO_GROUP:["Invitar al grupo"],ONE_GROUP_INVITATION:["Tienes 1 invitaci\u00f3n a un grupo"],N_GROUP_INVITATIONS:["Tienes ","${count}"," invitaciones a un grupo"],VIEW_MORE_GROUPS:["Ver m\u00e1s grupos"],ERROR_REMOVING_FROM_ALBUM:["Hubo un problema al quitar esta foto del \u00e1lbum"],WARNING_REMOVE_LAST_PHOTO_FROM_ALBUM:["Est\u00e1s a punto de quitar la \u00faltima foto de un \u00e1lbum lo que borrar\u00e1 el \u00e1lbum."],REMOVE_PHOTO_AND_ALBUM:["Quitar la foto y borrar el \u00e1lbum"],ADD_PHOTO_TO_ALBUM:["A\u00f1adir esta foto a un \u00e1lbum"],SEARCH_ALBUMS:["Buscar \u00e1lbumes"],ADD_TO_ALBUM:["A\u00f1adir al \u00e1lbum"],PHOTO_NOT_IN_ALBUMS:["En este momento esta foto no est\u00e1 en ning\u00fan \u00e1lbum"],VIEW_MORE_ALBUMS:["Ver m\u00e1s \u00e1lbumes"],PHOTO_IN_ONE_ALBUM:["Esta foto est\u00e1 en 1 \u00e1lbum"],PHOTO_IN_N_ALBUMS:["Esta foto est\u00e1 en ","${count}"," \u00e1lbumes"],INVITE_PENDING:["Invitaci\u00f3n pendiente"],CANCEL_INVITE:["Cancelar invitaci\u00f3n"],ACCEPT_INVITE:["Aceptar invitaci\u00f3n"],ONE_ITEM:["1 elemento"],N_ITEMS:["${count}"," elementos"],ERROR_REMOVING_FROM_GALLERY:["Hubo un problema al quitar esta foto de la galer\u00eda"],SEARCH_GALLERIES:["Buscar galer\u00edas"],ADD_TO_GALLERY:["A\u00f1adir a una galer\u00eda"],PHOTO_NOT_IN_GALLERIES:["En este momento esta foto no est\u00e1 en ning\u00fana galer\u00eda"],VIEW_MORE_GALLERIES:["Ver m\u00e1s galer\u00edas"],PHOTO_IN_ONE_GALLERY:["Esta foto est\u00e1 en 1 galer\u00eda"],PHOTO_IN_N_GALLERIES:["Esta foto est\u00e1 en ","${count}"," galer\u00edas"],DELETE_PHOTO:["Eliminar foto"],PERMANTENTLY_DELETE:["\u00bfQuieres eliminar permanentemente esta foto?"],EDIT_PHOTO:["Editar foto"],NO_VIDEOS_IN_AVIARY:["No se pueden editar videos en Aviary"],ENHANCE_WITH_AVIARY:["Mejora con Aviary"],NO_VIDEO_ROTATION:["No se pudieron girar los videos"],ROTATE:["Girar"],NO_VIDEO_REPLACE:["No se pudieron reemplazar los videos"],REPLACE:["Reemplazar"],PHOTO_NAVIGATION:["Navegaci\u00f3n de la foto"],THUMBNAIL_NAVIGATION:["Navegaci\u00f3n en la vista miniatura"],ZOOM:["Acercar/Alejar"],VIEW_IN_LIGHTBOX:["Ampliar foto"],BACK_TO_CONTEXT:["Volver al contexto"],ADD_TAG:["A\u00f1adir etiqueta"],GO_TO_ORGANIZER:["Ir a Organizr"],ALBUM:["\u00e1lbum"],ALBUMS:["\u00e1lbumes"],ERROR_LOADING_ALBUMS:["Hubo un problema al cargar tus \u00e1lbumes"],ERROR_ADDING_PHOTO_TO_ALBUM:["Hubo un problema al a\u00f1adir esta foto al \u00e1lbum"],ERROR_REMOVING_PHOTO_FROM_ALBUM:["Hubo un problema al quitar esta foto del \u00e1lbum"],ERROR_LOADING_GROUPS:["Hubo un problema al cargar los grupos en los que puedes colocar fotos"],ERROR_ADDING_TO_GROUP:["Hubo un problema al a\u00f1adir esta foto en el grupo"],ERROR_ADDING_TO_GROUP_NOT_OWNER:["Lo sentimos, la foto no se puedo agregar al grupo porque la foto no te pertenece."],ERROR_ADDING_TO_GROUP_NOT_MEMBER:["Lo sentimos, la foto no se pudo agregar al grupo. No eres miembro del grupo."],ERROR_ADDING_TO_GROUP_ALREADY_IN_POOL:["La foto ya se encuentra en ese conjunto del grupo."],ERROR_ADDING_TO_GROUP_MAX_POOLS:["Lo sentimos, la foto no se pudo agregar al grupo porque ya se alcanz\u00f3 la cantidad m\u00e1xima de conjuntos del grupo."],ERROR_ADDING_TO_GROUP_MAX_PHOTOS_FROM_USER:["Lo sentimos, la foto no se pudo agregar al grupo. Ya has agregado la cantidad m\u00e1xima de fotos al conjunto."],ERROR_ADDING_TO_GROUP_ADDED_TO_QUEUE:["Tu foto se ha agregado a la cola pendiente para el grupo."],ERROR_ADDING_TO_GROUP_ALREADY_IN_QUEUE:["Tu foto ya est\u00e1 en la cola pendiente para el grupo."],ERROR_ADDING_TO_GROUP_INVALID_CONTENT:["Lo sentimos, la foto no se pudo agregar al grupo. Para obtener m\u00e1s informaci\u00f3n, verifica los requisitos del grupo con respecto al tipo de medios, al tipo de contenido, al nivel de seguridad y a la ubicaci\u00f3n geogr\u00e1fica."],ERROR_ADDING_TO_GROUP_MAX_IN_POOL:["Lo sentimos, la foto no se pudo agregar al grupo. El grupo tiene la cantidad m\u00e1xima de fotos permitidas en un conjunto."],ERROR_INVITING_TO_GROUP:["Hubo un problema al invitar esta foto al grupo"],ERROR_CANCELING_GROUP_INVITIATON:["Hubo un problema al cancelar la invitaci\u00f3n de esta foto al grupo"],NO_MATCHES:["No se encontraron resultados"],CREATE_NEW:["Crear nuevo"],ERROR_LOADING_GROUP_INVITATIONS:["Hubo un problema al cargar las invitaciones del grupo de esta foto"],NO_GROUP_INVITATIONS:["No hay invitaciones de grupo pendientes"],PENDING_INVITATIONS_FOR_PHOTO:["Invitaciones pendientes de esta foto"],LOADING_INVITATIONS:["Cargando invitaciones"],ERROR_LOADING_GALLERIES:["Hubo un problema al cargar tus galer\u00edas"],ERROR_ADDING_TO_GALLERY:["Hubo un problema al a\u00f1adir esta foto en la galer\u00eda"],ERROR_PHOTO_NOT_ALLOWED_IN_GALLERY:["El propietario de esta foto no permite que la foto se a\u00f1ada a tu galer\u00eda"],ERROR_CREATING_GALLERY:["Ocurri\u00f3 un problema al crear tu galer\u00eda nueva"],DATE_TAKEN_FORMAT:["La fecha en que se tom\u00f3 la foto debe tener el formato MM/DD/AAAA hh:mm:ss."],DATE_POSTED_FUTURE:["La fecha de publicaci\u00f3n no puede ser en el futuro."],DATE_POSTED_FLICKR_JOIN:["La fecha de publicaci\u00f3n debe ser despu\u00e9s de que te uniste a Flickr."
],ERROR_SAVING_DATE:["Error al guardar las fechas"],DATE_INVALID:["Una o m\u00e1s fechas son inv\u00e1lidas"],EDIT_DATES:["Editar fechas"],DATE_TAKEN_ON:["Fecha en que se tom\u00f3"],DATE_POSTED_ON:["Fecha en que se public\u00f3"],TAKEN_CIRCA:["Circa tomada ","${intlDate}"],TAKEN_SOMETIME_IN:["Tomada en alg\u00fan momento durante ","${intlDate}"],TAKEN_IN:["Tomada en ","${intlDate}"],TAKEN_ON:["Tomada el ",{type:"date",valueName:"intlDate",format:"long"}],UPLOADED_ON:["Subida el ","${intlDate}"],SOMETHING_WENT_WRONG:["Algo sali\u00f3 mal."],REFRESH_BROWSER:["Actualiza tu navegador e int\u00e9ntalo nuevamente."],TWITTER_NOT_FOUND:["No se encontr\u00f3 la cuenta de Twitter en la publicaci\u00f3n"],TUMBLR_NOT_FOUND:["No se encontr\u00f3 la cuenta de Twitter en la publicaci\u00f3n"],LINK:["Enlace"],LINK_TO_VIDEO:["Enlace hacia este video:"],LINK_TO_PHOTO:["Enlace hacia esta foto:"],NO_LINKS_FOR_RESTRICTED_VIDEO:["Los enlaces no est\u00e1n disponibles para videos restringidos"],PRIVATE_VIDEO_SHARE:["Este es un video privado \u00bfTodav\u00eda quieres compartirlo?"],NO_LINKS_FOR_RESTRICTED_PHOTO:["Los enlaces no est\u00e1n disponibles para fotos restringidas"],PRIVATE_PHOTO_SHARE:["Esta es una foto privada \u00bfTodav\u00eda quieres compartirla?"],SHARING_RESTRICTED_VIDEO:["No se puede Compartir este video"],SHARING_RESTRICTED_PHOTO:["No se puede Compartir esta foto"],EMBED:["Insertar"],PUBLIC_TO_SHARE:["Para ver el c\u00f3digo incrustado, comparte esta foto"],SIZE:["Tama\u00f1o:"],TITLE_AND_OWNER_AT_START:["Mostrar t\u00edtulo y propietario al inicio"],SHARE_NOW:["\u00a1Mostrar ahora!"],SHARE_PHOTO:["Compartir foto"],SHARE_ON_TWITTER:["Compartir en Twitter"],AUTHORIZE_FOR_TWITTER:["por favor autoriza que Flickr pueda publicar en Twitter"],SHARE_ON_TUMBLR:["Compartir en Tumblr"],PUBLISH_NOW:["Publicar ahora"],ADD_TO_QUEUE:["A\u00f1adir a la cola"],SAVE_AS_DRAFT:["Guardar como borrador"],AUTHORIZE_FOR_TUMBLR:["por favor autoriza que Flickr pueda publicar en Tumblr"],SHARE_VIA_MAIL:["Compartir por correo"],SCREEN_NAME_OR_EMAIL:["Nombre en pantalla o correo electr\u00f3nico"],SQUARE:["Cuadrado"],SMALL:["Peque\u00f1o"],MEDIUM:["Mediano"],LARGE:["Grande"],ORIGINAL:["Original"],DUPLICATE_TAG:["Duplicar etiqueta"],INVALID_TAG:["Etiqueta inv\u00e1lida"],MAXIMUM_TAG_LIMIT:["Se alcanz\u00f3 el l\u00edmite m\u00e1ximo (76) de etiquetas"],ERROR_ADDING_TAG:["Error al a\u00f1adir la etiqueta"],ERROR_DELETING_TAG:["Error al borrar la etiqueta"],TAGS:["Etiquetas"],ADD_TAGS:["A\u00f1adir etiquetas"],ADD_A_TAG:["A\u00f1adir etiqueta"],PHOTO_IN_ONE_GROUP:["Esta foto est\u00e1 en 1 grupo"],PHOTO_IN_MANY_GROUPS:["Esta foto est\u00e1 en ",{type:"number",valueName:"count"}," grupos"],PHOTO_IN_NO_GROUPS:["Esta foto no est\u00e1 en ning\u00fan grupo"],ADD_A_COMMENT:["A\u00f1adir comentario"],COMMENT_TUTORIAL:["presiona 'Entrar' para publicar y May\u00fasculas+Entrar para agregar una l\u00ednea nueva"],SIGNED_IN_TO_POST_A_COMMENT:["Debes iniciar sesi\u00f3n para publicar un comentario"],SHARE:["Compartir"],CODE:["C\u00f3digo"],INCLUDE_A_MESSAGE:["Incluye un mensaje"],FOR_MORE_INFORMATION_SAFESEARCH:['Para obtener m\u00e1s informaci\u00f3n consulta <a href="//www.flickr.com/help/photos/?search=flag#145">estas Preguntas frecuentes</a>.'],FLAG_CONFIRMATION_SAFE_WITHIN:['Esta foto est\u00e1 marcada como <a href="//www.flickr.com/help/filters/#258">segura</a> coincide con tus criterios de <a href="//www.flickr.com/account/prefs/safesearch/">B\u00fasqueda segura</a>.'],FLAG_CONFIRMATION_SAFE_OUTSIDE:['Esta foto est\u00e1 marcada como <a href="//www.flickr.com/help/filters/#258">segura</a> y no entra en tus ajustes de <a href="//www.flickr.com/account/prefs/safesearch/">b\u00fasqueda segura</a>.'],FLAG_CONFIRMATION_MODERATE_WITHIN:['Esta foto est\u00e1 marcada como <a href="//www.flickr.com/help/filters/#258">moderada</a> coincide con tus criterios de <a href="//www.flickr.com/account/prefs/safesearch/">B\u00fasqueda segura</a>.'],FLAG_CONFIRMATION_MODERATE_OUTSIDE:['Esta foto est\u00e1 marcada como <a href="//www.flickr.com/help/filters/#258">moderada</a> y no entra en tus ajustes de <a href="//www.flickr.com/account/prefs/safesearch/">B\u00fasqueda segura</a>.'],FLAG_CONFIRMATION_RESTRICTED_WITHIN:['Esta foto est\u00e1 marcada como <a href="//www.flickr.com/help/filters/#258">restringida</a> coincide con tus criterios de <a href="//www.flickr.com/account/prefs/safesearch/">b\u00fasqueda segura</a>.'],FLAG_CONFIRMATION_RESTRICTED_OUTSIDE:['Esta foto est\u00e1 marcada como <a href="//www.flickr.com/help/filters/#258">restringida</a> y no entra en tus ajustes de <a href="//www.flickr.com/account/prefs/safesearch/">b\u00fasqueda segura</a>.'],PRIVATE_PHOTO:["Foto privada"],PHOTO_UNFIT_FOR_YOUR_EYES:["Esta foto no es apta para tus ojos. Te damos un gatito: (^._.^)\uff89"],NO_PHOTO_WITH_THAT_ID:["No se encontr\u00f3 una foto con el id ","${photoId}"],NO_MEMBERS_FOUND:["No se encontraron miembros"],TAKEN_ON_INTL:["Tomada el ",{type:"date",valueName:"intlDate",format:"long"}],UPLOADED_ON_INTL:["Subida el ",{type:"date",valueName:"intlDate",format:"long"}],TAKEN_IN_MONTH:["Tomada en ",{type:"date",valueName:"intlDate",format:"monthYear"}],VIEW_IN_LIGHTBOX_SHORTCUT:["Ver en caja de luz"],ZOOM_MAX_MESSAGE:["\u00a1Espera, no te emociones! Esta foto ya lleg\u00f3 al m\u00e1ximo de su tama\u00f1o."],CLICK_TO_FAVE_PHOTO:["Hacer clic aqu\u00ed para marcar esta foto como favorita"],CLICK_TO_FAVE_VIDEO:["Hacer clic aqu\u00ed para marcar este video como favorito"],BACK_TO_ACTIVITY_FEED:["Regresar a la fuente de actividades"],BACK_TO_PHOTOSTREAM:["Regresar a la galer\u00eda"],BACK_TO_ALBUM:["Regresar al \u00e1lbum"],BACK_TO_CONTACTS_LIST:["Regresar a la lista de contactos"],BACK_TO_FAVORITES:["Regresar a favoritos"],BACK_TO_GALLERY:["Regresar a la expo"],BACK_TO_PROFILE:["Regresar al perfil"],BACK_TO_EXPLORE:["Regresar a la exploraci\u00f3n"],BACK_TO_COMMONS:["Regresar a comunes"],BACK_TO_GROUP:["Regresar al grupo"],BACK_TO_MAP:["Regresar al mapa"
],BACK_TO_SEARCH:["Regresar a la b\u00fasqueda"]})},"@VERSION@",{requires:["intl"]});
YUI.add("hermes-template-photo-well-media-scrappy",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function c(e,t){var r="",i,s,o;r+='\n	<div class="restricted-interstitial">\n		<div class="restricted-interstitial-message">\n			<h2>',o={hash:{intlName:"photo-page-scrappy.ADULT_CONTENT"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,o):u.call(e,"intlMessage",o)))+"</h2>\n			",s=n["if"].call(e,e.isSignedIn,{hash:{},inverse:l.program(4,p,t),fn:l.program(2,h,t),data:t});if(s||s===0)r+=s;return r+="\n		</div>\n	</div>\n",r}function h(e,t){var r="",i,s;return r+="\n				<p>",s={hash:{intlName:"photo-page-scrappy.MATURE_AUDIENCES"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"<br />",s={hash:{intlName:"photo-page-scrappy.USER_DISCRETION"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"</p>\n				<p><button class='ui-button'><span>",s={hash:{intlName:"photo-page-scrappy.SHOW_ME_THIS_CONTENT_TYPE"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"</span></button></p>\n				<p>",s={hash:{intlName:"photo-page-scrappy.CHANGE_SAFE_SEARCH_IN_SETTINGS"},data:t},r+=a((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,s):u.call(e,"intlHTMLMessage",s)))+"</p>\n			",r}function p(e,t){var r="",i,s,o;return r+="\n				<p>",o={hash:{intlName:"photo-page-scrappy.SIGNED_IN_FOR_CONTENT"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,o):u.call(e,"intlMessage",o)))+' <a href="//',(s=n.host)?s=s.call(e,{hash:{},data:t}):(s=e.host,s=typeof s===f?s.apply(e):s),r+=a(s)+'/signin/" data-track="photoWellSignInClick">',o={hash:{intlName:"common.SIGN_IN"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,o):u.call(e,"intlMessage",o)))+"</a></p>\n			",r}function d(e,t){var r="",i;r+="\n	",i=n["if"].call(e,e.isVideo,{hash:{},inverse:l.program(9,m,t),fn:l.program(7,v,t),data:t});if(i||i===0)r+=i;return r+="\n",r}function v(e,t){var r="",i;return r+='\n		<div class="videoplayer main-photo" style="width:',(i=n.width)?i=i.call(e,{hash:{},data:t}):(i=e.width,i=typeof i===f?i.apply(e):i),r+=a(i)+"px; height:",(i=n.height)?i=i.call(e,{hash:{},data:t}):(i=e.height,i=typeof i===f?i.apply(e):i),r+=a(i)+'px;"></div>\n	',r}function m(e,t){var r="",i,s,o;return r+='\n\n		<span class="facade-of-protection-neue" style="width:',(i=n.width)?i=i.call(e,{hash:{},data:t}):(i=e.width,i=typeof i===f?i.apply(e):i),r+=a(i)+"px;height:",(i=n.height)?i=i.call(e,{hash:{},data:t}):(i=e.height,i=typeof i===f?i.apply(e):i),r+=a(i)+'px;">\n			',o={hash:{},data:t},r+=a((i=n.outlet||e.outlet,i?i.call(e,e["zoom-view"],o):u.call(e,"outlet",e["zoom-view"],o)))+'\n		</span>\n		\n		<img width="',(s=n.width)?s=s.call(e,{hash:{},data:t}):(s=e.width,s=typeof s===f?s.apply(e):s),r+=a(s)+'" height="',(s=n.height)?s=s.call(e,{hash:{},data:t}):(s=e.height,s=typeof s===f?s.apply(e):s),r+=a(s)+'" src="',(s=n.src)?s=s.call(e,{hash:{},data:t}):(s=e.src,s=typeof s===f?s.apply(e):s),r+=a(s)+'" class="low-res-photo">\n		<img width="',(s=n.width)?s=s.call(e,{hash:{},data:t}):(s=e.width,s=typeof s===f?s.apply(e):s),r+=a(s)+'" height="',(s=n.height)?s=s.call(e,{hash:{},data:t}):(s=e.height,s=typeof s===f?s.apply(e):s),r+=a(s)+'" src="',(s=n.highResSrc)?s=s.call(e,{hash:{},data:t}):(s=e.highResSrc,s=typeof s===f?s.apply(e):s),r+=a(s)+'" class="main-photo is-hidden" onload="registerFirstPhoto(this)">\n		<noscript>\n			<img width="',(s=n.width)?s=s.call(e,{hash:{},data:t}):(s=e.width,s=typeof s===f?s.apply(e):s),r+=a(s)+'" height="',(s=n.height)?s=s.call(e,{hash:{},data:t}):(s=e.height,s=typeof s===f?s.apply(e):s),r+=a(s)+'" src="',(s=n.highResSrc)?s=s.call(e,{hash:{},data:t}):(s=e.highResSrc,s=typeof s===f?s.apply(e):s),r+=a(s)+'" class="main-photo">\n		</noscript>\n	',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=n.helperMissing,a=this.escapeExpression,f="function",l=this;o=n["if"].call(t,t.needsInterstitial,{hash:{},inverse:l.program(6,d,i),fn:l.program(1,c,i),data:i});if(o||o===0)s+=o;return s+="\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/photo-well-media-scrappy",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-photo-well-media-novideo",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function c(e,t){var r="",i,s;return r+="\n	<div class='restricted-interstitial'>\n		<div class='restricted-interstitial-message'>\n			<h2>",s={hash:{intlName:"photo-page-scrappy.ADULT_CONTENT"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"</h2>\n			<p>",s={hash:{intlName:"photo-page-scrappy.MATURE_AUDIENCES"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"<br />",s={hash:{intlName:"photo-page-scrappy.USER_DISCRETION"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"</p>\n			<p><button class='ui-button'><span>",s={hash:{intlName:"photo-page-scrappy.SHOW_ME_THIS_CONTENT_TYPE"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"</span></button></p>\n			<p>",s={hash:{intlName:"photo-page-scrappy.CHANGE_SAFE_SEARCH_IN_SETTINGS"},data:t},r+=a((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,s):u.call(e,"intlHTMLMessage",s)))+"</p>\n		</div>\n	</div>\n",r}function h(e,t){var r="",i;r+='\n	<img onload="registerFirstPhoto(this)" class="main-photo',i=n["if"].call(e,e.isVideo,{hash:{},inverse:f.noop,fn:f.program(4,p,t),data:t});if(i||i===0)r+=i;r+='" width="',(i=n.width)?i=i.call(e,{hash:{},data:t}):(i=e.width,i=typeof i===l?i.apply(e):i),r+=a(i)+'" height="',(i=n.height)?i=i.call(e,{hash:{},data:t}):(i=e.height,i=typeof i===l?i.apply(e):i),r+=a(i)+'" src="',(i=n.src)?i=i.call(e,{hash:{},data:t}):(i=e.src,i=typeof i===l?i.apply(e):i),r+=a(i)+'">\n	',i=n["if"].call(e,e.isVideo,{hash:{},inverse:f.noop,fn:f.program(6,d,t),data:t});if(i||i===0)r+=i;return r+="\n",r}function p(e,t){return" is-video"}function d(e,t){var r="",i,s;return r+='\n	<span class="video-coming-soon hide-text">!</span>\n	<span class="video-coming-soon-text">',s={hash:{intlName:"photo-page-scrappy.VIDEO_COMING_SOON"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"</span>\n	",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=n.helperMissing,a=this.escapeExpression,f=this,l="function";o=n["if"].call(t,t.needsInterstitial,{hash:{},inverse:f.program(3,h,i),fn:f.program(1,c,i),data:i});if(o||o===0)s+=o;return s+="\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/photo-well-media-novideo",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-photo-well-ad",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function p(e,t){var r="",i;return r+='<a class="ad-frame" href="',(i=n.clickUrl)?i=i.call(e,{hash:{},data:t}):(i=e.clickUrl,i=typeof i===a?i.apply(e):i),r+=f(i)+'" data-track="ad_link_image" target="_blank">',r}function d(e,t){var r="",i,s;return r+='\n    <div class="ad-wrapper">\n        <img width=\'',(i=n.width)?i=i.call(e,{hash:{},data:t}):(i=e.width,i=typeof i===a?i.apply(e):i),r+=f(i)+"' height='",(i=n.height)?i=i.call(e,{hash:{},data:t}):(i=e.height,i=typeof i===a?i.apply(e):i),r+=f(i)+"' src='",(i=n.src)?i=i.call(e,{hash:{},data:t}):(i=e.src,i=typeof i===a?i.apply(e):i),r+=f(i)+'\'/>\n        <a class="ad-footer" href="',s={hash:{},data:t},r+=f((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.clickUrl,s):l.call(e,"renderTrustedMarkup",e.clickUrl,s)))+'" data-track="ad_link_bottom" target="_blank">\n            <h1>',s={hash:{intlName:"photo-page-scrappy.FIND_OUT_MORE_AD",brand:e.brand},data:t},r+=f((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,s):l.call(e,"intlHTMLMessage",s)))+"</h1>\n        </a>\n    </div>\n",r}function v(e,t){var r="",i;return r+="\n    <img width='",(i=n.width)?i=i.call(e,{hash:{},data:t}):(i=e.width,i=typeof i===a?i.apply(e):i),r+=f(i)+"' height='",(i=n.height)?i=i.call(e,{hash:{},data:t}):(i=e.height,i=typeof i===a?i.apply(e):i),r+=f(i)+"' src='",(i=n.src)?i=i.call(e,{hash:{},data:t}):(i=e.src,i=typeof i===a?i.apply(e):i),r+=f(i)+"' />\n",r}function m(e,t){var r="",i,s;return r+='\n<div class="more-info"> \n\n	<span><i class="moneyball"></i> ',s={hash:{intlName:"photo-page-scrappy.FIND_OUT_MORE_AD",brand:e.brand},data:t},r+=f((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,s):l.call(e,"intlHTMLMessage",s)))+"</span>\n</div>\n</a>",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=n.helperMissing,c=this,h=n.blockHelperMissing;o=n["if"].call(t,t.adFrame,{hash:{},inverse:c.noop,fn:c.program(1,p,i),data:i});if(o||o===0)s+=o;s+="\n\n",u={hash:{},inverse:c.noop,fn:c.program(3,d,i),data:i},(o=n.adsTypeB)?o=o.call(t,u):(o=t.adsTypeB,o=typeof o===a?o.apply(t):o),n.adsTypeB||(o=h.call(t,o,u));if(o||o===0)s+=o;s+="\n",u={hash:{},inverse:c.program(5,v,i),fn:c.noop,data:i},(o=n.adsTypeB)?o=o.call(t,u):(o=t.adsTypeB,o=typeof o===a?o.apply(t):o),n.adsTypeB||(o=h.call(t,o,u));if(o||o===0)s+=o;s+="\n\n",o=n["if"].call(t,t.adFrame,{hash:{},inverse:c.noop,fn:c.program(7,m,i),data:i});if(o||o===0)s+=o;return s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/photo-well-ad",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("photo-well-media-scrappy-view",function(e){var t=500,n=500,r=40,i;i={photo:{render:function(){var t=this,n,r=this.get("photo"),i,s,o;t.preloadImage&&(t.preloadImage.onload=null),i=this.getPhotoForDisplay(),s=this.getPhotoForDisplay({includeSizes:["sq","q","t","s","n"]}),o=this.get("container").one(".main-photo");if(!o||parseInt(o.getAttribute("width"),10)!==i.width||parseInt(o.getAttribute("height"),10)!==i.height)n=this.templates("photo-well-media-scrappy")({width:i.width,height:i.height,src:s.url,highResSrc:i.url,needsInterstitial:r.getValue("needsInterstitial"),isSignedIn:this.appContext.getViewer().signedIn,isVideo:!1,"zoom-view":this.subviews["zoom-view"]?this.subviews["zoom-view"].get("container"):""}),this.setContainerHTML(n);return YUI.Env.isServer?(this.serverWidth=i.width,this.serverHeight=i.height):r.getValue("needsInterstitial")||(t.preloadImage=new Image,t.preloadImage.onload=function(){if(this.onloadFired)return;if(!t.isActiveAndInDOM())return;this.onloadFired=!0,e.rapidTracker.beacon(this.name,"photoPageShowedSize"+(/(?:_([a-z]))?\.jpg/.exec(i.url)[1]||"\u00f8").toUpperCase());var n=t.get("container").one(".low-res-photo"),r=t.get("container").one(".main-photo");r.removeClass("is-hidden").show(),n.hide()},t.preloadImage.src=i.url,t.preloadImage.complete&&t.preloadImage.onload()),this}},video:{render:function(){var t,n=this,r=this.get("photo"),i=this.getPhotoForDisplay({excludeSizes:[]});return this.player?(this.player.resize(i.width,i.height),this):(t=this.templates("photo-well-media-scrappy")({width:i.width,height:i.height,src:i.url,needsInterstitial:r.getValue("needsInterstitial"),isVideo:!0,isSignedIn:this.appContext.getViewer().signedIn,"zoom-view":""}),this.setContainerHTML(t),YUI.Env.isServer?this:(this.player=new e.FlickrVideoPlayer({container:this.get("container").one(".videoplayer"),model:r,appContext:this.appContext}),n.player.init().then(function(){}),this.on("destroy",function(){n.player.destroy(),n.player=null}),this))}},yepVideoDisabled:{render:function(){var e,t=this.get("photo"),n=this.getPhotoForDisplay();return e=this.templates("photo-well-media-novideo")({width:n.width,height:n.height,src:n.url,needsInterstitial:t.getValue("needsInterstitial"),isVideo:t.getValue("isVideo")}),this.setContainerHTML(e),this}},ad:{render:function(){var e,t,n;return this.adJSON?t=this.adJSON:(t=this.appContext.adManager.getAdJSON(),this.adJSON=t),n=this.getAdSize(t),e=this.templates("photo-well-ad")({width:n.width,height:n.height,src:t.url,clickUrl:t.clickUrl,brand:t.brand,adsTypeB:this.appContext.flipper.isFlipped("moneyball-ads-type-b"),adFrame:!0}),this.setContainerHTML(e),this}}},e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,subviewConfig:{"zoom-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,disabled:function(){return!this.appContext.flipper.isFlipped("enable-scrappy-zoom")}}},initializer:function(e){return this.photoId=e.photoId,this.isAd=!!e.ad,this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this},loadState:function(){var e=this;return this.appContext.getModel("photo-models",e.photoId).then(function(t){e.set("photo",t)})},buildContainer:function(){return YUI.Env.isServer||this.set("clientRendered",!0),this.isAd?i.ad.render.call(this):this.appContext.flipper.isFlipped("yep-video")?i[this.get("photo").getValue("isVideo")?"video":"photo"].render.call(this):i.yepVideoDisabled.render.call(this),this},handleInterstitialDismissButtonClick:function(t){var n=this,r=this.get("personPreferences"),i=this.get("photo"),s=i.getValue("safetyLevel");e.rapidTracker.beacon(this.name,"restrictedContentInterstitialClick"),r.setValue("safeSearch",s),r.registry.remoteUpdate(n.appContext.auth.user.nsid).then(function(e){var t=i.registry.attributeSearch({needsInterstitial:!0});t.forEach(function(e){i.registry.getValue(e,"safetyLevel")<=r.getValue("safeSearch")&&i.registry.setValue(e,"needsInterstitial",!1)}),n.buildContainer()},function(e){n.appContext.error(e.message),n.appContext.error(e.stack),n.onError(n.intlMessage({intlName:"photo-page-scrappy.COULDNT_UPDATE_SETTINGS"}))})},onParentViewEvent:function(e,t){t&&t[0]==="photoWellResized"&&(this.get("photo").getValue("needsInterstitial")||(this.set("canvasSizeIsDirty",!0),this.buildContainer()))},activate:function(){var t=this,n=this.getPhotoForDisplay(),r=this.get("container").one(".main-photo"),i,s;return this.get("photo").getValue("needsInterstitial")||(this.registerEventHandler(e.on("flickr:photo-media-well-update",function(e){t.set("canvasSizeIsDirty",!0),t.buildContainer()})),!this.isAd&&(!t.get("clientRendered")||n.width!==Number(r.getAttribute("width"))||n.height!==Number(r.getAttribute("height")))&&t.buildContainer()),this.registerEventHandler(e.on("flickr:display-note-box",function(n){i=e.Node.create('<div class="note-box"></div>'),s=t.get("container").one(".main-photo").getXY(),t.get("container").append(i),i.setStyles({top:n.noteBoxTop+t.get("container").one(".main-photo").getDOMNode().offsetTop,left:n.noteBoxLeft,width:n.noteBoxWidth,height:n.noteBoxHeight})})),this.appContext.getViewer().signedIn&&this.appContext.getModel("person-preferences-models",t.appContext.auth.user.nsid).then(function(e){t.set("personPreferences",e),t.get("photo").getValue("needsInterstitial")&&t.registerEventHandler(t.get("container").one(".restricted-interstitial-message button").on("click",t.handleInterstitialDismissButtonClick,t))}),this},onError:function(t){var n=this;this.fire("subviewViewEvent","getDialogOffset",function(r){var i=e.Views.dialog.getInstance("dialog-alert",{content:t,attrs:{title:"Error",level:"warning",confirmLabel:"OK"},parent:n,offsetLeft:r,dialogClass:"scrappy-dialog"});i.show()})},getPhotoForDisplay:function(e){var t=this.getCanvasSize(),n=this.getPixelRatio(),r=this.get("photo").getSizeToFit(t,e),i,s;return i=Math.min(t.height/n,r.height),s=Math.min(t.width/n,r.width/r.height*i),i=Math.min(i,r.height/r.width*s),{width:Math.round(s),height:Math.round(
i),url:r.url,pixelRatio:r.width/s}},getAdSize:function(e){var t=this.getCanvasSize(),n=this.getPixelRatio(),r=80,i=140,s,o;return this.appContext.flipper.isFlipped("moneyball-ads-type-b")&&(t.height-=(r+i)*n,t.width-=i*n),s=Math.min(t.height/n,e.height),o=Math.min(t.width/n,e.width/e.height*s),s=Math.min(s,e.height/e.width*o),{width:o,height:s}},getCanvasSize:function(){var e,i=this.getPixelRatio(),s,o=this.get("container"),u,a,f,l,c={width:t,height:n};return this.get("canvasSizeIsDirty")?YUI.Env.isServer||(s=this.get("container").ancestor(),u=o.getStyle("paddingTop")?parseInt(o.getStyle("paddingTop").match(/[0-9]+/)[0],10):0,a=o.getStyle("paddingBottom")?parseInt(o.getStyle("paddingBottom").match(/[0-9]+/)[0],10):0,l=r,f=r,s&&(e=s.get("region"),e.height=parseInt(s.getStyle("height").match(/[0-9]+/)[0],10)-(u+a),e.width=this.appContext.viewportData.viewport.width-(l+f),e.width>0&&e.height>0&&(this.set("canvasSizeIsDirty",!1),this.set("cachedCanvasSize",e),this.appContext.setCookie({remove:!0,cookieName:"photoPWS",path:"/photos/",cookieValue:e.width}),this.appContext.setCookie({remove:!0,cookieName:"photoPHS",path:"/photos/",cookieValue:e.height}),this.appContext.setCookie({remove:!0,cookieName:"density",path:"/photos/",cookieValue:i})))):e=this.get("cachedCanvasSize"),this.appContext.viewportData.viewport.width>0&&(c={width:this.appContext.viewportData.viewport.width,height:this.appContext.viewportData.viewport.height-240}),e||(e={top:0,left:0,bottom:n,right:t,width:parseInt(this.appContext.getCookie("photoPWS"),10)||c.width,height:parseInt(this.appContext.getCookie("photoPHS"),10)||c.height}),e.height*=i,e.width*=i,e},getPixelRatio:function(){return this.appContext.getViewer().getPixelRatio()}},{ATTRS:{canvasSizeIsDirty:{value:!0,setter:function(e){return!!e}},cachedCanvasSize:{getter:function(t){return e.merge(t)},setter:function(t){return e.merge(t)}}}})},"@VERSION@",{requires:["flickr-view","moment","flickr-video-player","zoom-view","hermes-template-photo-well-media-scrappy","hermes-template-photo-well-media-novideo","hermes-template-photo-well-ad"],optional:["photo-models"],langBundles:["common","photo-page-scrappy"]});
YUI.add("hermes-template-context-slider-photo",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function l(e,t){return"currentImage"}function c(e,t){return"restrictedImage"}function h(e,t){return"\n		<span class='play-slideshow'>&#9654;</span>\n		<span class='countdown-slideshow'></span>\n	"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this,a="function",f=this.escapeExpression;s+='<a class="context-thumb emptyImage ',o=n["if"].call(t,t.currentPhoto,{hash:{},inverse:u.noop,fn:u.program(1,l,i),data:i});if(o||o===0)s+=o;s+=" ",o=n["if"].call(t,t.needsInterstitial,{hash:{},inverse:u.noop,fn:u.program(3,c,i),data:i});if(o||o===0)s+=o;s+='" href="',(o=n.url)?o=o.call(t,{hash:{},data:i}):(o=t.url,o=typeof o===a?o.apply(t):o),s+=f(o)+'" data-track="contextSliderNextPhotoClick" style="background-image: url(',(o=n.background)?o=o.call(t,{hash:{},data:i}):(o=t.background,o=typeof o===a?o.apply(t):o),s+=f(o)+"); left: ",(o=n.left)?o=o.call(t,{hash:{},data:i}):(o=t.left,o=typeof o===a?o.apply(t):o),s+=f(o)+'px" data-photo-id="',(o=n.id)?o=o.call(t,{hash:{},data:i}):(o=t.id,o=typeof o===a?o.apply(t):o),s+=f(o)+'" title="',(o=n.title)?o=o.call(t,{hash:{},data:i}):(o=t.title,o=typeof o===a?o.apply(t):o),s+=f(o)+'">\n	',o=n["if"].call(t,t.currentPhoto,{hash:{},inverse:u.noop,fn:u.program(5,h,i),data:i});if(o||o===0)s+=o;return s+="\n</a>",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/context-slider-photo",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-context-slider-scrappy",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function l(e,t){var r="",i,s;return r+="\n	<div class='loadingError'>\n		<p>",s={hash:{intlName:"photo-page-scrappy.ERROR_LOADING_CONTEXT"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+'</p>\n		<p><button href="#" class="ui-button ui-button-cta ui-button-transparent retry">',s={hash:{intlName:"common.RETRY"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"</button></p>\n	</div>\n",r}function c(e,t){var r="",i;r+="\n\n	<div class='context-slider small-slider ",i=n["if"].call(e,e.slideshowEnabled,{hash:{},inverse:f.noop,fn:f.program(4,h,t),data:t});if(i||i===0)r+=i;r+='\'>\n\n		<div class="wrapper is-ready clear-float small-photos">\n	\n			<div class="slider">\n	\n				',i=n.each.call(e,e.previousPhotos,{hash:{},inverse:f.noop,fn:f.program(6,p,t),data:t});if(i||i===0)r+=i;r+="\n\n				",i=n["if"].call(e,e["is-ad"],{hash:{},inverse:f.program(10,v,t),fn:f.program(8,d,t),data:t});if(i||i===0)r+=i;r+="\n\n	\n				",i=n.each.call(e,e.nextPhotos,{hash:{},inverse:f.noop,fn:f.program(6,p,t),data:t});if(i||i===0)r+=i;r+="\n	\n			</div> \n	\n		</div>\n		\n	</div>\n	\n	<div class='context-slider big-slider ",i=n["if"].call(e,e.slideshowEnabled,{hash:{},inverse:f.noop,fn:f.program(4,h,t),data:t});if(i||i===0)r+=i;r+='\'>\n		\n		<span class="nav nav-l">\n			<span class="hide-text">&larr;</span>\n		</span>\n	\n		<div class="wrapper clear-float">\n	\n			<div class="slider">\n	\n				',i=n.each.call(e,e.previousPhotos,{hash:{},inverse:f.noop,fn:f.program(6,p,t),data:t});if(i||i===0)r+=i;r+="\n	\n				",i=n["if"].call(e,e["is-ad"],{hash:{},inverse:f.program(10,v,t),fn:f.program(8,d,t),data:t});if(i||i===0)r+=i;r+="\n	\n				",i=n.each.call(e,e.nextPhotos,{hash:{},inverse:f.noop,fn:f.program(6,p,t),data:t});if(i||i===0)r+=i;return r+='\n	\n			</div> \n	\n		</div>\n\n		<span class="nav nav-r">\n			<span class="hide-text">&rarr;</span>\n		</span>\n	\n	</div>\n	\n',r}function h(e,t){return"slideshowEnabled"}function p(e,t){var i="",s;i+="\n					",s=f.invokePartial(r["context-slider-photo"],"context-slider-photo",e,n,r,t);if(s||s===0)i+=s;return i+="\n				",i}function d(e,t){return'\n					<a class="context-thumb middle currentImage adThumb">Ad</a>\n				'}function v(e,t){var r="",i;r+="\n					",i=n.each.call(e,e.currentPhoto,{hash:{},inverse:f.noop,fn:f.program(11,m,t),data:t});if(i||i===0)r+=i;return r+="\n				",r}function m(e,t){var i="",s;i+="\n						",s=f.invokePartial(r["context-slider-photo"],"context-slider-photo",e,n,r,t);if(s||s===0)i+=s;return i+="\n					",i}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=this.merge(r,e.partials),i=i||{};var s="",o,u=n.helperMissing,a=this.escapeExpression,f=this;o=n["if"].call(t,t.loadingError,{hash:{},inverse:f.program(3,c,i),fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n",s}),r={};e.Array.each(["context-slider-photo","context-slider-photo","context-slider-photo","context-slider-photo","context-slider-photo","context-slider-photo"],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/context-slider-scrappy",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-context-slider-photo","hermes-template-context-slider-photo","hermes-template-context-slider-photo","hermes-template-context-slider-photo","hermes-template-context-slider-photo","hermes-template-context-slider-photo"]});
YUI.add("hermes-template-context-image",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function f(e,t){var r="",i;return r+='\n\n	<a data-loaded="false" style="left:',(i=n.left)?i=i.call(e,{hash:{},data:t}):(i=e.left,i=typeof i===o?i.apply(e):i),r+=u(i)+';float:left;display:block;position:absolute;background-color:gray;height:40px;width:86px;border:1px solid transparent;" href="#">\n		\n	</a>\n\n',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,o="function",u=this.escapeExpression,a=this;return s=n.each.call(t,t.images,{hash:{},inverse:a.noop,fn:a.program(1,f,i),data:i}),s||s===0?s:""}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/context-image",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
